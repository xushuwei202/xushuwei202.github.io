<!DOCTYPE HTML>
<html>
<head>
	<title>gift-animate</title>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1 maximum-scale=1 user-scalable=0" />
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #000000;
		}

		#photonstorm {
			position: absolute;
			bottom: 16px;
			right: 16px;
		}

		#pixi {
			position: absolute;
			bottom: 16px;
			left: 16px;
		}
	</style>
	<script src="jquery-1.8.3.min.js"></script>
	<script src="pixi.min.js"></script>
</head>
<body>


	<script>
		var renderer = PIXI.autoDetectRenderer(800, 600);
		document.body.appendChild(renderer.view);

		// create the root of the scene graph
		var stage = new PIXI.Container();

		 var bg = PIXI.Sprite.fromImage('assets/yh-bg.png');
        bg.x = 0;
        bg.y = 0;
        stage.addChild(bg);

		PIXI.loader
		    .add('assets/yanhua.json')
		    .load(onAssetsLoaded);



		var movie;

		function onAssetsLoaded()
		{

		    // create an array of textures from an image path
		    var frames = [];

		    for (var i = 1; i <= 13; i++) {
		        var val = i < 10 ? '0' + i : i;

		        // magically works since the spritesheet was loaded with the pixi loader
		        frames.push(PIXI.Texture.fromFrame('frame00' + val + '.png'));
		    }


		    // create a MovieClip (brings back memories from the days of Flash, right ?)
		    movie = new PIXI.extras.MovieClip(frames);

		    /*
		     * A MovieClip inherits all the properties of a PIXI sprite
		     * so you can change its position, its anchor, mask it, etc
		     */
		    movie.position.set(300);

		    movie.anchor.set(0.5);
		    movie.animationSpeed = 0.5;

		    movie.play();

		    stage.addChild(movie);

		    animate();
		}

		function animate() {

		    // render the stage container
		    renderer.render(stage);

		    requestAnimationFrame(animate);
		}
	</script>

	</body>
</html>
